<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aydın UZ - Öğretmenler Günü</title>
    <style>
        :root {
            --gold: #f4c430;
            --gold-dim: #b38f22;
            --white: #ffffff;
            --matrix-green: #00ff41;
            --font-main: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            --font-mono: 'Courier New', Courier, monospace;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: #000;
            color: var(--white);
            font-family: var(--font-main);
            overflow: hidden;
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* --- CANVASES --- */
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        #river-canvas {
            z-index: 20;
            transition: opacity 2s ease;
        }

        #matrix-canvas {
            z-index: 10;
            opacity: 0;
            transition: opacity 2s ease;
        }

        /* --- INTRO TEXT --- */
        #intro-text {
            position: absolute;
            z-index: 30;
            font-size: 2rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            font-weight: 300;
            color: var(--white);
            text-shadow: 0 0 10px rgba(255,255,255,0.5);
            transition: opacity 1s ease;
            pointer-events: none;
        }

        /* --- MAIN CONTENT (VOID FLOATING) --- */
        #content-wrapper {
            position: absolute;
            z-index: 40;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            width: 100%;
            height: 100%;
            pointer-events: none; /* Let clicks pass through to canvas if needed */
        }

        /* IMAGE WRAPPER */
        .img-wrapper {
            position: relative;
            margin-bottom: 20px; /* Space between image and text */
            pointer-events: auto; /* Re-enable clicks for button */
            opacity: 0;
            transform: scale(0.95);
            transition: opacity 2.5s ease-out, transform 2.5s ease-out;
            
            /* Center alignment logic */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #teacher-img {
            /* Responsive Portrait Sizing */
            height: 55vh; /* Takes up 55% of screen height */
            width: auto;  /* Maintain Aspect Ratio */
            max-width: 90vw; /* Don't overflow width on mobile */
            
            /* Visual Styling */
            border-radius: 12px; /* Soft corners instead of circle to show full tower */
            box-shadow: 0 0 60px rgba(244, 196, 48, 0.4), 0 0 20px rgba(244, 196, 48, 0.2);
            
            /* Ensure the image blends with the void but remains clear */
            display: block;
            mask-image: linear-gradient(to bottom, black 85%, transparent 100%);
            -webkit-mask-image: linear-gradient(to bottom, black 85%, transparent 100%);
        }

        /* TEXT LINES */
        .text-line {
            opacity: 0; /* Hidden initially, handled by JS */
            margin: 5px 0;
            position: relative;
        }

        /* Glitch Animation Classes */
        .glitch-active {
            animation: glitch-anim 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) both infinite;
            color: var(--white);
        }

        @keyframes glitch-anim {
            0% { transform: translate(0) }
            20% { transform: translate(-2px, 2px) }
            40% { transform: translate(-2px, -2px) }
            60% { transform: translate(2px, 2px) }
            80% { transform: translate(2px, -2px) }
            100% { transform: translate(0) }
        }

        /* Decoding Character Styles */
        .dud {
            color: #555;
            font-family: var(--font-mono);
            opacity: 0.7;
        }
        .dud.highlight {
            color: var(--matrix-green);
            text-shadow: 0 0 5px var(--matrix-green);
            font-weight: bold;
        }
        
        #title-name {
            font-family: var(--font-main);
            font-size: 3.5rem;
            font-weight: 800;
            color: var(--gold);
            letter-spacing: 4px;
            text-transform: uppercase;
            text-shadow: 0 0 30px rgba(244, 196, 48, 0.6);
            min-height: 1.2em; /* Prevent layout jump */
            margin-top: 10px;
        }

        #subtitle-msg {
            font-family: var(--font-mono);
            font-size: 1.2rem;
            color: var(--white);
            letter-spacing: 1px;
            font-weight: 400;
            opacity: 0.9;
            min-height: 1.2em;
            text-shadow: 0 0 10px rgba(255,255,255,0.3);
        }

        /* FALLBACK BUTTON */
        #fallback-input { display: none; }
        #fallback-btn {
            display: none;
            margin-top: 10px;
            padding: 10px 20px;
            background: rgba(0,0,0,0.8);
            border: 1px solid var(--gold);
            color: var(--gold);
            font-family: var(--font-mono);
            cursor: pointer;
            border-radius: 4px;
            font-size: 0.9rem;
            pointer-events: auto;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        #fallback-btn:hover {
            background: var(--gold);
            color: #000;
            box-shadow: 0 0 15px var(--gold);
        }

        /* UTILITIES */
        .fade-out { opacity: 0 !important; }
        .visible { opacity: 1 !important; transform: scale(1) !important; }

        /* RESPONSIVE */
        @media (max-width: 600px) {
            #teacher-img { height: 45vh; max-width: 95vw; }
            #title-name { font-size: 2.2rem; letter-spacing: 2px; }
            #subtitle-msg { font-size: 0.8rem; max-width: 90%; }
        }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react/": "https://aistudiocdn.com/react@^19.2.0/"
  }
}
</script>
</head>
<body>

    <canvas id="matrix-canvas"></canvas>
    <canvas id="river-canvas"></canvas>
    
    <div id="intro-text">Su akıyor...</div>

    <div id="content-wrapper">
        <!-- Image Area -->
        <div class="img-wrapper" id="img-wrapper">
            <!-- Ensure image_0.png is in the folder -->
            <img id="teacher-img" src="image_0.png" alt="Aydın UZ">
            <button id="fallback-btn" onclick="document.getElementById('fallback-input').click()">Fotoğraf Seç</button>
            <input type="file" id="fallback-input" accept="image/*">
        </div>

        <!-- Typography Area -->
        <div class="text-line" id="title-name"></div>
        <div class="text-line" id="subtitle-msg"></div>
    </div>

    <script>
        // --- CONFIGURATION ---
        const CONFIG = {
            riverColors: ['#00a8ff', '#0097e6', '#00d2d3'],
            leblebiColors: ['#f4c430', '#d4a017', '#e1b12c'], // Matches the golden tones of the photo
            finalTitle: "AYDIN UZ",
            finalSubtitle: "ÖĞRETMENLER GÜNÜNÜZ KUTLU OLSUN"
        };

        // --- DOM ELEMENTS ---
        const els = {
            riverCanvas: document.getElementById('river-canvas'),
            matrixCanvas: document.getElementById('matrix-canvas'),
            introText: document.getElementById('intro-text'),
            imgWrapper: document.getElementById('img-wrapper'),
            teacherImg: document.getElementById('teacher-img'),
            fallbackBtn: document.getElementById('fallback-btn'),
            fallbackInput: document.getElementById('fallback-input'),
            titleName: document.getElementById('title-name'),
            subtitleMsg: document.getElementById('subtitle-msg')
        };

        // --- MAIN ENTRY ---
        window.onload = () => {
            setupImageFallback();
            runSequence();
        };

        // --- SEQUENCE CONTROLLER ---
        function runSequence() {
            // 1. Start River
            const stopRiver = startRiver();

            // 2. Text: "Su yolunu buldu"
            setTimeout(() => {
                els.introText.style.opacity = 0;
                setTimeout(() => {
                    els.introText.innerText = "Su yolunu buldu.";
                    els.introText.style.opacity = 1;
                }, 500);
            }, 3000);

            // 3. Transition to Void
            setTimeout(() => {
                // Fade out Intro
                els.introText.classList.add('fade-out');
                els.riverCanvas.classList.add('fade-out');

                // Start Matrix (Leblebi Rain)
                els.matrixCanvas.style.opacity = 0.4; // Slightly clearer to match photo bg
                startMatrix();

                // Stop River logic to save CPU
                setTimeout(stopRiver, 2000);

                // Reveal Content
                revealContent();

            }, 4500);
        }

        function revealContent() {
            // Show Image with Fade & Scale
            els.imgWrapper.classList.add('visible');

            // Start Text Scrambling Effect after image appears
            setTimeout(() => {
                els.titleName.style.opacity = 1;
                new TextScrambler(els.titleName, CONFIG.finalTitle).start();
                
                setTimeout(() => {
                    els.subtitleMsg.style.opacity = 1;
                    new TextScrambler(els.subtitleMsg, CONFIG.finalSubtitle).start();
                }, 1000); // Slight delay for subtitle
            }, 1000);
        }

        // --- ADVANCED TEXT SCRAMBLER CLASS ---
        class TextScrambler {
            constructor(el, finalText) {
                this.el = el;
                this.finalText = finalText;
                // Mix of blocks and matrix-like symbols
                this.chars = '!<>-_\\/[]{}—=+*^?#________██▓▓▒▒░░'; 
                this.frame = 0;
                this.queue = [];
                
                // Build queue
                for (let i = 0; i < finalText.length; i++) {
                    const from = this.randomChar();
                    const to = finalText[i];
                    // Each character resolves at a different time
                    const start = Math.floor(Math.random() * 40);
                    const end = start + Math.floor(Math.random() * 60);
                    this.queue.push({ from, to, start, end });
                }
                
                this.cancelId = null;
                this.update = this.update.bind(this);
            }

            randomChar() {
                return this.chars[Math.floor(Math.random() * this.chars.length)];
            }

            update() {
                let output = '';
                let complete = 0;
                let activeGlitch = false;
                
                for (let i = 0; i < this.queue.length; i++) {
                    let { from, to, start, end, char } = this.queue[i];
                    
                    if (this.frame >= end) {
                        complete++;
                        output += to;
                    } else if (this.frame >= start) {
                        activeGlitch = true;
                        if (!char || Math.random() < 0.28) {
                            char = this.randomChar();
                            this.queue[i].char = char;
                        }
                        // Randomly highlight some characters in Green/Matrix style
                        const isHighlight = Math.random() > 0.8;
                        output += `<span class="dud ${isHighlight ? 'highlight' : ''}">${char}</span>`;
                    } else {
                        output += '<span style="opacity: 0">_</span>';
                    }
                }

                this.el.innerHTML = output;

                // Add CSS Glitch Shake to container while processing
                if (activeGlitch) {
                    this.el.classList.add('glitch-active');
                    // Random text shadow glitch
                    const rX = (Math.random() * 4 - 2) + 'px';
                    const rY = (Math.random() * 4 - 2) + 'px';
                    this.el.style.textShadow = `${rX} ${rY} 0px rgba(0, 255, 65, 0.5)`;
                } else {
                    this.el.classList.remove('glitch-active');
                    this.el.style.textShadow = '';
                }

                if (complete === this.queue.length) {
                    this.el.classList.remove('glitch-active');
                    this.el.style.textShadow = '';
                    cancelAnimationFrame(this.cancelId);
                } else {
                    this.frame++;
                    this.cancelId = requestAnimationFrame(this.update);
                }
            }

            start() {
                this.update();
            }
        }

        // --- RIVER ANIMATION (HORIZONTAL FLOW) ---
        function startRiver() {
            const ctx = els.riverCanvas.getContext('2d');
            let w, h, animationId;
            let time = 0;

            const resize = () => {
                w = els.riverCanvas.width = window.innerWidth;
                h = els.riverCanvas.height = window.innerHeight;
            };
            window.addEventListener('resize', resize);
            resize();

            const draw = () => {
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, w, h);

                // Draw 3 layers of horizontal waves
                for (let i = 0; i < 3; i++) {
                    ctx.beginPath();
                    // Varying heights and speeds
                    const waveHeight = 60 + i * 30;
                    const speed = (i + 1) * 0.01; 
                    const yOffset = h/2 + (i-1)*50;

                    for (let x = 0; x <= w; x += 10) {
                        // Horizontal wave calculation
                        const y = yOffset + Math.sin(x * 0.005 + time * speed + i) * waveHeight;
                        ctx.lineTo(x, y);
                    }
                    
                    // Fill bottom
                    ctx.lineTo(w, h);
                    ctx.lineTo(0, h);
                    ctx.closePath();

                    ctx.fillStyle = `rgba(0, 168, 255, ${0.4 - i * 0.1})`;
                    ctx.fill();
                }

                time++;
                animationId = requestAnimationFrame(draw);
            };
            draw();

            return () => cancelAnimationFrame(animationId);
        }

        // --- MATRIX ANIMATION (LEBLEBI VOID) ---
        function startMatrix() {
            const ctx = els.matrixCanvas.getContext('2d');
            let w, h;

            const resize = () => {
                w = els.matrixCanvas.width = window.innerWidth;
                h = els.matrixCanvas.height = window.innerHeight;
            };
            window.addEventListener('resize', resize);
            resize();

            const fontSize = 16;
            const columns = Math.floor(w / fontSize);
            const drops = new Array(columns).fill(1).map(() => Math.random() * -100);

            const draw = () => {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
                ctx.fillRect(0, 0, w, h);

                for (let i = 0; i < drops.length; i++) {
                    const x = i * fontSize;
                    const y = drops[i] * fontSize;

                    // Draw Solid Circle (Leblebi)
                    ctx.beginPath();
                    ctx.arc(x, y, fontSize * 0.3, 0, Math.PI * 2);
                    // Match colors to the golden hues of the photo
                    ctx.fillStyle = CONFIG.leblebiColors[Math.floor(Math.random() * CONFIG.leblebiColors.length)];
                    ctx.fill();

                    if (y > h && Math.random() > 0.98) {
                        drops[i] = 0;
                    }
                    drops[i]++;
                }
                requestAnimationFrame(draw);
            };
            draw();
        }

        // --- ROBUST IMAGE FALLBACK ---
        function setupImageFallback() {
            els.teacherImg.onerror = () => {
                // If image fails to load, hide image tag and show button
                els.teacherImg.style.display = 'none';
                els.fallbackBtn.style.display = 'block';
            };

            els.fallbackInput.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (evt) => {
                        els.teacherImg.src = evt.target.result;
                        els.teacherImg.style.display = 'block';
                        els.fallbackBtn.style.display = 'none';
                    };
                    reader.readAsDataURL(file);
                }
            });
        }

    </script>
</body>
</html>